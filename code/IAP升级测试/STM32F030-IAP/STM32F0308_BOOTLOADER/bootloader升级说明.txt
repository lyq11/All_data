在合并bootloader与app的时候,需要在bootloader的hex文件中倒数第二行前面增加一行地址的数据
:022FFA00A5A58B
用于标识APP成功下载并运行。
然后将APP全部内容替换掉bootloader.hex文件的最后一行数据生成新的文件。


运行bootloader时，预留2秒等待时间接收升级请求，无升级请求则判断是否APP完整标志，运行APP。
在接收完成并判断可以运行app的时候，擦除app可运行标志，进入app并接收到正确指令后再写入可运行标志。



更新 将标志位写入到stm32的选项字节当中，不用操作flash的库函数。